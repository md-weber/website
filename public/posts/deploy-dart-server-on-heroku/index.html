<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Deployment of a Dart Server on Heroku | Max Weber - Developer, Publisher and Father</title>
<meta name=keywords content="DevOps,Dart,Backend"><meta name=description content="In this article I want to tell you about my personal development story"><meta name=author content="Max Weber"><link rel=canonical href=http://localhost:1313/posts/deploy-dart-server-on-heroku/><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/posts/deploy-dart-server-on-heroku/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Deployment of a Dart Server on Heroku"><meta property="og:description" content="In this article I want to tell you about my personal development story"><meta property="og:type" content="article"><meta property="og:url" content="http://localhost:1313/posts/deploy-dart-server-on-heroku/"><meta property="og:image" content="http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-04-08T00:00:00+00:00"><meta property="article:modified_time" content="2022-04-08T00:00:00+00:00"><meta property="og:site_name" content="Max Weber"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Deployment of a Dart Server on Heroku"><meta name=twitter:description content="In this article I want to tell you about my personal development story"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://localhost:1313/posts/"},{"@type":"ListItem","position":2,"name":"Deployment of a Dart Server on Heroku","item":"http://localhost:1313/posts/deploy-dart-server-on-heroku/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Deployment of a Dart Server on Heroku","name":"Deployment of a Dart Server on Heroku","description":"In this article I want to tell you about my personal development story","keywords":["DevOps","Dart","Backend"],"articleBody":"Running the first server is a fantastic experience for every developer.\nIt gives you many options and possibilities and improves your general understanding of software engineering. After we learned in my previous videos already how to start a server locally, we want in this article to learn how to make our services available on the world wide web so that you can access them from every device.\nDeployment Software deployment includes all activities that make a software system available to use. - Wikipedia\nIn our use case, we want to access our server from every device connected to the Internet and not only our local device in front of us. In professional teams, that task is automated in most cases and transforms\nquickly. Into continuous deployment where you work on your code, push to a repository, and the deployment gets automatically triggered. But in smaller teams or smaller organizations, the preferred way is usually for a skilled professional to perform that task. And because we are skilled professionals, we do exactly that today.\nPrerequisites We have to prepare just a few things to get started in the beautiful world of deployment. The first thing that we need is a physical server that will run our software server :). For this reason, we will use Heroku, because it allows us to run our software for free in a small server Virtual Machine (VM) that we can scale up if we want.\nWe also need a software service that we already built in the videos mentioned above. The service we want to deploy will use the shelf server from Dart that we already run locally and make our first requests. But this will also work if you use a aqueduct server or a conduit server.\nSummary of what we need today:\nHeroku Account\nRunning Software Server\nNo previous knowledge about deployment processes\nGetting started After you successfully create an account on Heroku, you will probably see a page that welcomes you to Heroku. From here, you could also create a new app, but we will do it with the Heroku CLI.\nHeroku CLI Now that we have that covered let us jump right into it. To begin our journey to deploy something on Heroku, we need to install the Heroku CLI. Then, check out the link of the Heroku CLI and select the system that fits your operating system.\nGreat, the Heroku CLI will help us deploy our Server to the Heroku server. After the installation, we first have to login against the Heroku system. For that, execute Heroku login in your terminal. After executing the command, your default web browser will open and allow you to log in to Heroku.\nCreate a new Heroku app The most convenient way to create a new Heroku app is via the CLI. For that, open a terminal and navigate to your workspace in which your project is. In our example, it will be in ~/dev/dart-server. Now we want to create our app. We execute Heroku create in our example. We call the app fe-dart-server. If you do not pass a name,\nit will create a random app name for you.\n`bash\nheroku create fe-dart-server\nCreating â¬¢ fe-dart-serverâ€¦ done\nhttps://fe-dart-server.herokuapp.com/ | https://git.heroku.com/fe-dart-server.git\n`\nAs a result, Heroku delivers us two URLs. The first one is the URL directly to our app. Currently, we do not have an application running on https://fe-dart-server.herokuapp.com/.Therefore, you will find the documentation link of Heroku if you open it. The second link is the internal git server of Heroku, from which it will use your source code to build the project. We will need to add a new remote to git to push our Dart project.\n`bash\nIf you have not initialized your project with git git init\ngit add remote heroku https://git.heroku.com/fe-dart-server.git\n`\n** Hint: It could be that if your project was already in git, it was already added with the Heroku create command**\nNow that your app is registered to Heroku, we have to set up a buildpack.\nHow Heroku works Now it is essential to know how Heroku works. A build pack is responsible for transforming your deployed source code into a slug, which can then be executed by a dyno. You can read more about how Heroku works here. So before we go deeper into the topic, letâ€™s quickly check what a slug and a dyno are.\nA slug is a bundle of your source, fetched dependencies, the language runtime, and compiled/generated output of the build system - ready for execution.\nDynos are isolated, virtualized Unix containers that provide the environment required to run an application.\nSource: devcenter.heroku.com\nSet up a build pack for Dart Unfortunately, Heroku is not yet supporting Dart with an official build pack. Therefore, we have to take advantage of the fantastic Dart \u0026 Flutter Community, which has created already a build pack that we can use. We will use in this tutorial the most starred build pack by igrigorik.\nTo use the build pack, we will have to tell Heroku to use a specific download URL for the Dart language and configure the build pack we want to use. To find a Dart SDK URL, we check the Dart Archive page. Then, we select Linux and the version we would like to install. This example case is version 2.16.2`, which is the current version. Now right, click on Dart SDK and copy the link address. We will need it in a second.\nNow it is time to set the Dart URL and our BUILDPACK_URLfor our Heroku app by executing in our terminal.\nheroku config:set DART_SDK_URL=https://storage.googleapis.com/dart-archive/channels/stable/release/2.16.2/sdk/dartsdk-linux-x64-release.zip Setting DART_SDK_URL and restarting â¬¢ fe-dart-server... done, v3 DART_SDK_URL: https://storage.googleapis.com/dart-archive/channels/stable/release/2.16.2/sdk/dartsdk-linux-x64-release.zip heroku config:add BUILDPACK_URL=https://github.com/igrigorik/heroku-buildpack-dart.git Setting BUILDPACK_URL and restarting â¬¢ fe-dart-server... done, v4 BUILDPACK_URL: https://github.com/igrigorik/heroku-buildpack-dart.git Now it is time to push our source code to Heroku by pushing our source code to the remote git that we got when we created our Heroku app.\ngit add . # Adds all files to git in this repository git push --set-upstream heroku main # Sets the upstream branch to heroku main and pushes all files If you are doing it in the terminal, Heroku will give you a lot of logging information about the build process.\nremote: -----\u003e Discovering process types remote: Procfile declares types -\u003e (none) remote: remote: -----\u003e Compressing... remote: Done: 195.9M remote: -----\u003e Launching... remote: Released v7 remote: https://fe-dart-server.herokuapp.com/ deployed to Heroku remote: remote: Verifying deploy... done. To https://git.heroku.com/fe-dart-server.git \\trefs/heads/main:refs/heads/main\\t75c0e7f..b4f1198 Done The log above tells us that everything was successful, but one step is missing. First, we need to declare the dynos we want for our app. For that, we need to create aProcfilein the root directory of our project. Then, we enter the dyno and what it should start to execute our server. In our case, we execute thedart_server.dartin the bin folder.\nweb: ./dart-sdk/bin/dart bin/dart_server.dart Hint: The Procfile does not have a file extension like.txtor.js.\nIf we now commit and push again to the Heroku git server we are ready to see our server in action.\ngit commit -m \\\"Added Procfile to setup the dyno\\\" git push --set-upstream heroku main ðŸŽ‰ Great, if everything worked well, you should have now your first running Dart Server on Heroku.\nTroubleshooting As always, some things could go wrong, and I try to add a collection that we found out during our live stream.\nDynamic Port Heroku does not provide you static port, so you will get a new port every time the instance is started. Especially in the free plan, that happens pretty frequently and therefore, you must take the PORT provided by the\nEnvironment variablesof Heroku.\nvar env = Platform.environment; var port = env.entries.firstWhere((element) =\u003e element.key == 'PORT', orElse: () =\u003e MapEntry('PORT', '8080')); var server = await shelf_io.serve( logRequests().addHandler(router), '0.0.0.0', int.parse(port.value)); Replace localhost with 0.0.0.0 Heroku is pointing to itself while setup a server you will need to changelocalhost to 0.0.0.0\nvar server = await shelf_io.serve( logRequests().addHandler(router), '0.0.0.0', int.parse(port.value)); Wrapping up Great, we did it. With these steps, we published our server to Heroku and made our very first deployment possible. The next milestone is to create a helpful app out of this server. We were maybe starting with a small quiz app that allows you and your friends to learn more about development. For that, you will probably need more insights into the shelf_router package or an even bigger solution like Conduit. Feel free to share your first examples with me on Twitter with the Hashtag #FlutterExplained. I cannot wait to see your results!\n","wordCount":"1418","inLanguage":"en","image":"http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2022-04-08T00:00:00Z","dateModified":"2022-04-08T00:00:00Z","author":{"@type":"Person","name":"Max Weber"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/posts/deploy-dart-server-on-heroku/"},"publisher":{"@type":"Organization","name":"Max Weber - Developer, Publisher and Father","logo":{"@type":"ImageObject","url":"http://localhost:1313/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="Home (Alt + H)"><img src=http://localhost:1313/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/>Home</a>&nbsp;Â»&nbsp;<a href=http://localhost:1313/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Deployment of a Dart Server on Heroku</h1><div class=post-description>In this article I want to tell you about my personal development story</div><div class=post-meta><span title='2022-04-08 00:00:00 +0000 UTC'>April 8, 2022</span>&nbsp;Â·&nbsp;7 min&nbsp;Â·&nbsp;1418 words&nbsp;Â·&nbsp;Max Weber&nbsp;|&nbsp;<a href=https://github.com/md-weber/website/tree/main/content/posts/deploy-dart-server-on-heroku.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#deployment>Deployment</a></li><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#getting-started>Getting started</a><ul><li><a href=#heroku-cli>Heroku CLI</a></li><li><a href=#create-a-new-heroku-app>Create a new Heroku app</a></li></ul></li></ul><ul><li><a href=#how-heroku-works>How Heroku works</a></li><li><a href=#set-up-a-build-pack-for-dart>Set up a build pack for Dart</a></li><li><a href=#troubleshooting>Troubleshooting</a><ul><li><a href=#dynamic-port>Dynamic Port</a></li><li><a href=#replace-localhost-with-0000>Replace localhost with 0.0.0.0</a></li></ul></li><li><a href=#wrapping-up>Wrapping up</a></li></ul></nav></div></details></div><div class=post-content><p>Running the first server is a fantastic experience for every developer.</p><p>It gives you many options and possibilities and improves your general understanding of software engineering. After we learned in my previous <a href="https://www.youtube.com/watch?v=kYM-wlOhQ3I&amp;list=PLq83k-ITj6lQuw6asmdEbuNCV6vVwqT5c">videos</a> already how to start a server locally, we want in this article to learn how to make our services available on the world wide web so that you can access them from every device.</p><h2 id=deployment>Deployment<a hidden class=anchor aria-hidden=true href=#deployment>#</a></h2><blockquote><p>Software deployment includes all activities that make a software system available to use. - <a href=https://en.wikipedia.org/wiki/Software_deployment>Wikipedia</a></p></blockquote><p>In our use case, we want to access our server from every device connected to the Internet and not only our local device in front of us. In professional teams, that task is automated in most cases and transforms</p><p>quickly. Into continuous deployment where you work on your code, push to a repository, and the deployment gets automatically triggered. But in smaller teams or smaller organizations, the preferred way is usually for a skilled professional to perform that task. And because we are skilled professionals, we do exactly that today.</p><h2 id=prerequisites>Prerequisites<a hidden class=anchor aria-hidden=true href=#prerequisites>#</a></h2><p>We have to prepare just a few things to get started in the beautiful world of deployment. The first thing that we need is a physical server that will run our software server :). For this reason, we will use <a href=https://www.heroku.com/>Heroku</a>, because it allows us to run our software for free in a small server <a href=https://en.wikipedia.org/wiki/Virtual_machine>Virtual Machine (VM)</a> that we can scale up if we want.</p><p>We also need a software service that we already built in the videos mentioned above. The service we want to deploy will use the <a href=https://pub.dev/packages/shelf>shelf server</a> from Dart that we already run locally and make our first requests. But this will also work if you use a <a href=https://aqueduct.io/>aqueduct server</a> or a <a href=https://www.theconduit.dev/>conduit server</a>.</p><p><strong>Summary of what we need today:</strong></p><ol><li><p>Heroku Account</p></li><li><p>Running Software Server</p></li><li><p>No previous knowledge about deployment processes</p></li></ol><h2 id=getting-started>Getting started<a hidden class=anchor aria-hidden=true href=#getting-started>#</a></h2><p>After you successfully create an account on Heroku, you will probably see a page that welcomes you to Heroku. From here, you could also create a new app, but we will do it with the <a href=https://devcenter.heroku.com/articles/heroku-cli>Heroku CLI</a>.</p><h3 id=heroku-cli>Heroku CLI<a hidden class=anchor aria-hidden=true href=#heroku-cli>#</a></h3><p>Now that we have that covered let us jump right into it. To begin our journey to deploy something on Heroku, we need to install the <a href=https://devcenter.heroku.com/articles/heroku-cli><code>Heroku CLI</code></a>. Then, check out the link of the Heroku CLI and select the system that fits your operating system.</p><p>Great, the Heroku CLI will help us deploy our Server to the Heroku server. After the installation, we first have to <code>login</code> against the Heroku system. For that, execute <code>Heroku login</code> in your terminal. After executing the command, your default web browser will open and allow you to log in to Heroku.</p><h3 id=create-a-new-heroku-app>Create a new Heroku app<a hidden class=anchor aria-hidden=true href=#create-a-new-heroku-app>#</a></h3><p>The most convenient way to create a new Heroku app is via the CLI. For that, open a terminal and navigate to your workspace in which your project is. In our example, it will be in <code>~/dev/dart-server</code>. Now we want to create our app. We execute <code>Heroku create &lt;name-of-your-app></code> in our example. We call the app <code>fe-dart-server</code>. If you do not pass a name,</p><p>it will create a random app name for you.</p><p>`bash</p><p>heroku create fe-dart-server</p><p>Creating â¬¢ fe-dart-server&mldr; done</p><p><a href=https://fe-dart-server.herokuapp.com/>https://fe-dart-server.herokuapp.com/</a> | <a href=https://git.heroku.com/fe-dart-server.git>https://git.heroku.com/fe-dart-server.git</a></p><p>`</p><p>As a result, Heroku delivers us two URLs. The first one is the URL directly to our app. Currently, we do not have an application running on <code>https://fe-dart-server.herokuapp.com/</code>.Therefore, you will find the documentation link of Heroku if you open it. The second link is the internal git server of Heroku, from which it will use your source code to build the project. We will need to add a new remote to git to push our Dart project.</p><p>`bash</p><h1 id=if-you-have-not-initialized-your-project-with-git>If you have not initialized your project with git<a hidden class=anchor aria-hidden=true href=#if-you-have-not-initialized-your-project-with-git>#</a></h1><p>git init</p><p>git add remote heroku <a href=https://git.heroku.com/fe-dart-server.git>https://git.heroku.com/fe-dart-server.git</a></p><p>`</p><p>** Hint: It could be that if your project was already in git, it was already added with the Heroku create command**</p><p>Now that your app is registered to Heroku, we have to set up a <a href=https://devcenter.heroku.com/articles/buildpacks>buildpack</a>.</p><h2 id=how-heroku-works>How Heroku works<a hidden class=anchor aria-hidden=true href=#how-heroku-works>#</a></h2><p>Now it is essential to know how Heroku works. A build pack is responsible for transforming your deployed source code into a <code>slug</code>, which can then be executed by a <code>dyno</code>. You can read more about how Heroku works <a href=https://devcenter.heroku.com/articles/how-heroku-works>here</a>. So before we go deeper into the topic, let&rsquo;s quickly check what a slug and a dyno are.</p><blockquote><p>A <code>slug</code> is a bundle of your source, fetched dependencies, the language runtime, and compiled/generated output of the build system - ready for execution.</p></blockquote><blockquote><p><code>Dynos</code> are isolated, virtualized Unix containers that provide the environment required to run an application.</p></blockquote><p>Source: <a href=devcenter.heroku.com>devcenter.heroku.com</a></p><h2 id=set-up-a-build-pack-for-dart>Set up a build pack for Dart<a hidden class=anchor aria-hidden=true href=#set-up-a-build-pack-for-dart>#</a></h2><p>Unfortunately, Heroku is not yet supporting <code>Dart</code> with an official build pack. Therefore, we have to take advantage of the fantastic Dart & Flutter Community, which has created already a build pack that we can use. We will use in this tutorial the most starred build pack by <a href=https://github.com/igrigorik>igrigorik</a>.</p><p>To use the build pack, we will have to tell Heroku to use a specific download URL for the Dart language and configure the build pack we want to use. To find a Dart SDK URL, we check the <a href=https://dart.dev/get-dart/archive>Dart Archive</a> page. Then, we select <code>Linux</code> and the version we would like to install. This example case is version 2.16.2`, which is the current version. Now right, click on Dart SDK and copy the link address. We will need it in a second.</p><p><img loading=lazy src=//images.ctfassets.net/573xlmlwok2s/3JQn7HrFnvWYoRq1e9USaj/eab88f39e4487fb34aa3e1d584b6db78/dart-archive.png alt="Dart Version Archive"></p><p>Now it is time to set the Dart URL and our <code>BUILDPACK_URL</code>for our Heroku app by executing in our terminal.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>
</span></span><span class=line><span class=cl>heroku config:set <span class=nv>DART_SDK_URL</span><span class=o>=</span>https://storage.googleapis.com/dart-archive/channels/stable/release/2.16.2/sdk/dartsdk-linux-x64-release.zip
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Setting DART_SDK_URL and restarting â¬¢ fe-dart-server... <span class=k>done</span>, v3
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>DART_SDK_URL: https://storage.googleapis.com/dart-archive/channels/stable/release/2.16.2/sdk/dartsdk-linux-x64-release.zip
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>heroku config:add <span class=nv>BUILDPACK_URL</span><span class=o>=</span>https://github.com/igrigorik/heroku-buildpack-dart.git
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Setting BUILDPACK_URL and restarting â¬¢ fe-dart-server... <span class=k>done</span>, v4
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>BUILDPACK_URL: https://github.com/igrigorik/heroku-buildpack-dart.git
</span></span></code></pre></div><p>Now it is time to push our source code to Heroku by pushing our source code to the remote git that we got when we created our Heroku app.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>
</span></span><span class=line><span class=cl>git add .                           <span class=c1># Adds all files to git in this repository</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>git push --set-upstream heroku main <span class=c1># Sets the upstream branch to heroku main and pushes all files</span>
</span></span></code></pre></div><p>If you are doing it in the terminal, Heroku will give you a lot of logging information about the build process.</p><pre tabindex=0><code>
remote: -----&gt; Discovering process types

remote:        Procfile declares types -&gt; (none)

remote:

remote: -----&gt; Compressing...

remote:        Done: 195.9M

remote: -----&gt; Launching...

remote:        Released v7

remote:        https://fe-dart-server.herokuapp.com/ deployed to Heroku

remote:

remote: Verifying deploy... done.

To https://git.heroku.com/fe-dart-server.git

 \trefs/heads/main:refs/heads/main\t75c0e7f..b4f1198

Done
</code></pre><p>The log above tells us that everything was successful, but one step is missing. First, we need to declare the dynos we want for our app. For that, we need to create a<code>Procfile</code>in the root directory of our project. Then, we enter the dyno and what it should start to execute our server. In our case, we execute the<code>dart_server.dart</code>in the bin folder.</p><pre tabindex=0><code class="language-:title=Procfile" data-lang=":title=Procfile">
web: ./dart-sdk/bin/dart bin/dart_server.dart
</code></pre><p>Hint: The Procfile does <strong>not</strong> have a file extension like<code>.txt</code>or<code>.js</code>.</p><p>If we now <code>commit</code> and push again to the Heroku git server we are ready to see our server in action.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>
</span></span><span class=line><span class=cl>git commit -m <span class=se>\&#34;</span>Added Procfile to setup the dyno<span class=se>\&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>git push --set-upstream heroku main
</span></span></code></pre></div><p>ðŸŽ‰ Great, if everything worked well, you should have now your first running Dart Server on Heroku.</p><h2 id=troubleshooting>Troubleshooting<a hidden class=anchor aria-hidden=true href=#troubleshooting>#</a></h2><p>As always, some things could go wrong, and I try to add a collection that we found out during our <a href=https://youtu.be/3zKC4RvJOII>live stream</a>.</p><h3 id=dynamic-port>Dynamic Port<a hidden class=anchor aria-hidden=true href=#dynamic-port>#</a></h3><p>Heroku does not provide you static port, so you will get a new port every time the instance is started. Especially in the free plan, that happens pretty frequently and therefore, you must take the PORT provided by the</p><p><code>Environment variables</code>of Heroku.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=n>env</span> <span class=o>=</span> <span class=n>Platform</span><span class=p>.</span><span class=n>environment</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=n>port</span> <span class=o>=</span> <span class=n>env</span><span class=p>.</span><span class=n>entries</span><span class=p>.</span><span class=n>firstWhere</span><span class=p>((</span><span class=n>element</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=n>element</span><span class=p>.</span><span class=n>key</span> <span class=o>==</span> <span class=s1>&#39;PORT&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nl>orElse:</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=n>MapEntry</span><span class=p>(</span><span class=s1>&#39;PORT&#39;</span><span class=p>,</span> <span class=s1>&#39;8080&#39;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=n>server</span> <span class=o>=</span> <span class=kd>await</span> <span class=n>shelf_io</span><span class=p>.</span><span class=n>serve</span><span class=p>(</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>logRequests</span><span class=p>().</span><span class=n>addHandler</span><span class=p>(</span><span class=n>router</span><span class=p>),</span> <span class=s1>&#39;0.0.0.0&#39;</span><span class=p>,</span> <span class=kt>int</span><span class=p>.</span><span class=n>parse</span><span class=p>(</span><span class=n>port</span><span class=p>.</span><span class=n>value</span><span class=p>));</span>
</span></span></code></pre></div><h3 id=replace-localhost-with-0000>Replace localhost with 0.0.0.0<a hidden class=anchor aria-hidden=true href=#replace-localhost-with-0000>#</a></h3><p>Heroku is pointing to itself while setup a server you will need to change<code>localhost</code> to 0.0.0.0</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=n>server</span> <span class=o>=</span> <span class=kd>await</span> <span class=n>shelf_io</span><span class=p>.</span><span class=n>serve</span><span class=p>(</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>logRequests</span><span class=p>().</span><span class=n>addHandler</span><span class=p>(</span><span class=n>router</span><span class=p>),</span> <span class=s1>&#39;0.0.0.0&#39;</span><span class=p>,</span> <span class=kt>int</span><span class=p>.</span><span class=n>parse</span><span class=p>(</span><span class=n>port</span><span class=p>.</span><span class=n>value</span><span class=p>));</span>
</span></span></code></pre></div><h2 id=wrapping-up>Wrapping up<a hidden class=anchor aria-hidden=true href=#wrapping-up>#</a></h2><p>Great, we did it. With these steps, we published our server to Heroku and made our very first deployment possible. The next milestone is to create a helpful app out of this server. We were maybe starting with a small quiz app that allows you and your friends to learn more about development. For that, you will probably need more insights into the <a href=https://pub.dev/packages/shelf_router>shelf_router package</a> or an even bigger solution like <a href=https://conduit.dev>Conduit</a>. Feel free to share your first examples with me on Twitter with the Hashtag <a href="https://twitter.com/intent/tweet?hashtags=FlutterExplained"><code>#FlutterExplained</code></a>. I cannot wait to see your results!</p></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:1313/tags/devops/>DevOps</a></li><li><a href=http://localhost:1313/tags/dart/>Dart</a></li><li><a href=http://localhost:1313/tags/backend/>Backend</a></li></ul><nav class=paginav><a class=prev href=http://localhost:1313/posts/a-terminal-real-time-application-with-dart-sockets/><span class=title>Â« Prev</span><br><span>A terminal real time application with Dart Sockets</span>
</a><a class=next href=http://localhost:1313/posts/code-analysis-and-linting-in-flutter-and-dart/><span class=title>Next Â»</span><br><span>Code Analysis & Linting in Flutter and Dart</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=http://localhost:1313/>Max Weber - Developer, Publisher and Father</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><style>#consent-notice{padding:1rem;display:none;text-align:center;position:fixed;bottom:0;width:calc(100% - 2rem);background:#222;color:rgba(255,255,255,.8)}#consent-notice span{margin-right:1rem}#consent-notice button{cursor:pointer;display:inline-block;width:auto}#consent-notice span a{color:inherit;text-decoration:underline;text-decoration-color:rgba(255,255,255,.5)}#consent-notice button.btn{margin-left:.5rem}#consent-notice button.btn.manage-consent{background:rgba(255,255,255,.1);font-weight:400}#consent-overlay{position:fixed;left:0;top:0;width:100%;height:100vh;display:none;background:rgba(0,0,0,.75);z-index:999999;overflow:auto;cursor:pointer}#consent-overlay.active{display:flex}#consent-overlay>div{background:#fff;width:100%;max-width:30rem;padding:1.75rem;margin:auto;cursor:initial}#consent-overlay>div>div{display:flex;align-items:flex-start;margin-bottom:1rem}#consent-overlay>div>div:last-child{margin:0}#consent-overlay h3{padding-top:0}#consent-overlay input{margin-top:.3rem}#consent-overlay label{display:block}#consent-overlay .btn{margin-right:.5rem}#consent-overlay button.btn.save-consent{background:rgba(0,0,0,.6);font-weight:400}@media(max-width:767px){#consent-overlay>div{padding:1.75rem 1rem}#consent-notice span{display:block;padding-top:3px;margin-bottom:1.5rem}#consent-notice button.btn{position:relative;bottom:4px}}</style><div id=consent-notice><span>We would like to use
<a class=manage-consent href=#manage-consent>third party code</a> to
improve the functionality of this website.</span><button class="btn manage-consent">Manage preferences</button><button class="btn deny-consent">Deny</button><button class="btn approve-consent">Allow</button></div><div id=consent-overlay><div><div><input type=checkbox id=item0 value=1 name=item0>
<label for=item0><h3>Google Anaytics</h3><p>This code gives us insight into the number of people that visit our website, where they are from and what they are clicking on. We follow the guidelines of the Dutch Government, which describe how to use Google Analytics without requiring explicit consent.</p></label></div><div><button id=save-consent class="btn save-consent" data-consentvalue=0>
Save preferences
</button>
<button class="btn approve-consent">Allow all</button></div></div></div><script>const scripts=[];scripts[0]="/js/ga.js";function createCookie(e,t,n){var s,o="";n&&(s=new Date,s.setTime(s.getTime()+n*24*60*60*1e3),o="; expires="+s.toUTCString()),document.cookie=e+"="+t+o+"; path=/"}function readCookie(e){for(var t,s=e+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(t=o[n];t.charAt(0)==" ";)t=t.substring(1,t.length);if(t.indexOf(s)==0)return t.substring(s.length,t.length)}return null}function eraseCookie(e){createCookie(e,"",-1)}function denyAllConsentScripts(){var e="";scripts.forEach(function(){e=e+"0"}),acceptSomeConsentScripts(e)}function acceptAllConsentScripts(){var e="";scripts.forEach(function(){e=e+"1"}),acceptSomeConsentScripts(e)}function acceptSomeConsentScripts(e){setConsentInputs(e),createCookie("consent-settings",e,31),document.getElementById("consent-notice").style.display="none",document.getElementById("consent-overlay").classList.remove("active"),loadConsentScripts(e)}function loadConsentScripts(e){scripts.forEach(function(t,n){if(e[n]=="1"){var s=document.createElement("script");s.type="text/javascript",s.src=t,document.body.appendChild(s)}})}function setConsentInputs(e){var t=document.querySelectorAll("#consent-overlay input:not([disabled])");t.forEach(function(t,n){e[n]=="1"?t.checked=!0:t.checked=!1})}function setConsentValue(){var t=document.querySelectorAll("#consent-overlay input:not([disabled])"),e="";t.forEach(function(t){t.checked?e=e+"1":e=e+"0"}),document.getElementById("save-consent").dataset.consentvalue=e}var consentValue,elements=document.querySelectorAll("#consent-overlay input:not([disabled])");elements.forEach(function(e){e.checked=!1}),readCookie("consent-settings")?(consentValue=readCookie("consent-settings").toString(),setConsentInputs(consentValue),loadConsentScripts(consentValue)):document.getElementById("consent-notice").style.display="block",elements=document.querySelectorAll(".manage-consent"),elements.forEach(function(e){e.addEventListener("click",function(){document.getElementById("consent-overlay").classList.toggle("active")})}),elements=document.querySelectorAll(".deny-consent"),elements.forEach(function(e){e.addEventListener("click",function(){denyAllConsentScripts()})}),elements=document.querySelectorAll(".approve-consent"),elements.forEach(function(e){e.addEventListener("click",function(){acceptAllConsentScripts()})}),document.getElementById("save-consent").addEventListener("click",function(){setConsentValue(),acceptSomeConsentScripts(this.dataset.consentvalue)}),document.getElementById("consent-overlay").addEventListener("click",function(e){document.querySelector("#consent-overlay > div").contains(e.target)||this.classList.toggle("active")})</script></body></html>