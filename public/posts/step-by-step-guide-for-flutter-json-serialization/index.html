<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Step-by-Step guide for Flutter JSON Serialization | Max Weber - Developer, Publisher and Father</title>
<meta name=keywords content="flutter,JSON,Serialization"><meta name=description content="In this article I want to tell you about my personal development story"><meta name=author content="Max Weber"><link rel=canonical href=https://flutter-explained.dev/posts/step-by-step-guide-for-flutter-json-serialization/><link crossorigin=anonymous href=/assets/css/stylesheet.d6fcd20a4fb86efa4dfac8ec95da60244cc8871042183da1ef28e3a762ad79c8.css integrity="sha256-1vzSCk+4bvpN+sjsldpgJEzIhxBCGD2h7yjjp2Ktecg=" rel="preload stylesheet" as=style><link rel=icon href=https://flutter-explained.dev/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://flutter-explained.dev/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://flutter-explained.dev/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://flutter-explained.dev/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://flutter-explained.dev/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://flutter-explained.dev/posts/step-by-step-guide-for-flutter-json-serialization/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://flutter-explained.dev/posts/step-by-step-guide-for-flutter-json-serialization/"><meta property="og:site_name" content="Max Weber - Developer, Publisher and Father"><meta property="og:title" content="Step-by-Step guide for Flutter JSON Serialization"><meta property="og:description" content="In this article I want to tell you about my personal development story"><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-04-05T00:00:00+00:00"><meta property="article:modified_time" content="2020-04-05T00:00:00+00:00"><meta property="article:tag" content="Flutter"><meta property="article:tag" content="JSON"><meta property="article:tag" content="Serialization"><meta property="og:image" content="https://flutter-explained.dev/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://flutter-explained.dev/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Step-by-Step guide for Flutter JSON Serialization"><meta name=twitter:description content="In this article I want to tell you about my personal development story"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://flutter-explained.dev/posts/"},{"@type":"ListItem","position":2,"name":"Step-by-Step guide for Flutter JSON Serialization","item":"https://flutter-explained.dev/posts/step-by-step-guide-for-flutter-json-serialization/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Step-by-Step guide for Flutter JSON Serialization","name":"Step-by-Step guide for Flutter JSON Serialization","description":"In this article I want to tell you about my personal development story","keywords":["flutter","JSON","Serialization"],"articleBody":"General Serialization Serialization is the process in computer science to convert an object into something that can be saved in a database or be sent via a network request. Today we want to transform a JSON String that we receive from an API and transform it into an instance of an object.\nTo get our Person information as a String, I will work in the following example with the Random User Generator. This can generate random user information and provides us with an API to receive a JSON String.\nBasic Network Request – Example App With the help of the RandomUserAPI, I created an application that shows us a list of users as soon as we open the app. We create this Application together in the video for a basic network request. In the video, we use the manual approach for Flutter JSON Serialization, and with this blog post, we changed that to a more automated process.\nIf you search the source code for this project and this article please you will find everything here.\nManual Flutter JSON Serialization To get a better understanding of why we should prefer automatic Flutter JSON Serialization, we have to take a step backwards. For that, we first take a look at how the manual serialization works precisely.\nclass Person { String name; String phoneNumber; String imageUrl; Person({this.name, this.phoneNumber, this.imageUrl}); Person.fromJson(Map\u003cString, dynamic\u003e json) : name = '${json[\"name\"][\"title\"]} ' '${json[\"name\"][\"first\"]} ' '${json[\"name\"][\"last\"]}', phoneNumber = json[\"phone\"], imageUrl = json[\"picture\"][\"thumbnail\"]; } In the code snippet above, we created a new person object that we receive from our API. As you probably already have seen, we have to write all the key strings into the class and pollute our class with API information. Additionally, we come into the trap that if we want to add or remove an attribute, we have to change it all over.\nThat makes the maintainability pretty hard. Especially if the API changes and we have to create it from scratch. That would lead to a lot of searches and replacements, and we will lose all IDE supports.\nBenefits No boilerplate surrounding the solution\nThere is no setup required, so you can start directly accessing the parameters\nDisadvantages You have to write every line yourself\nTypos can happen and reduce the stability of your application\nFor every new Field that you want to add, delete or modify we have to modify the code in the model\nHigher maintenance costs especially for larger projects or with changing API´s\nGenerated Serialization Now that we understand the issues with self-written serialisation let’s have a look at generated Flutter JSON Serialization. There is at the moment not a built-in solution in the Flutter framework, but there are plenty of perfect packages on pub.dev for this problem. In this article, we will have a closer look at the json_serializable package.\nThe package works powerfully with the build_runner package and allows us to generate the “fromJSON” and “toJSON” functions, without writing all keys of the JSON. We only have to set up our models correctly, annotate them accurately and provide two functions inside. But enough of the words, we want to see some code.\nDependencies Before we can begin to work with the json_serializable package, we have to add first some dependencies into our project.\ndependencies: flutter: sdk: flutter cupertino_icons: ^0.1.3 http: ^0.12.0+4 json_annotation: ^3.0.1 dev_dependencies: flutter_test: sdk: flutter build_runner: ^1.8.1 json_serializable: ^3.3.0 The json_annotation is the only dependency that actually has to be inside of our project. The build_runner and json_serializable are just development dependencies and will not be part of the final bundle.\nModify the model part 'person_model.g.dart'; @JsonSerializable() class PersonModel { NameModel name; String phone; String email; PictureModel picture; PersonModel({this.name, this.phone, this.email, this.picture}); factory PersonModel.fromJson(Map\u003cString, dynamic\u003e json) =\u003e _$PersonModelFromJson(json); Map\u003cString, dynamic\u003e toJson() =\u003e _$PersonModelToJson(this); } Line 1: With the part person_model.g.dart we give the PersonModel class the possibility to access the methods inside the person_model.g.dart file. The file will be generated later from the built_runner.\nLine 3: The @JsonSerializable() annotation tells the build_runner that this class has to be concerned for the generation of a new file and creation of a serialization.\nLine 5 + 8: For objects inside our JSON we have to create their representing Model classes for NameModel and PictureModel. The new models will also be annotated with @JsonSerializable() and will also get the two new methods from line 12 and 14.\nLine 12: The new factory constructor fromJson is close to our old method. But instead of creating a new Instance of the PersonModel, we call a method _$PersonModelFromJson(json). This method will be generated later with the help of built_runner.\nLine 14: The toJson method returns as expected a Json (in Dart a Map between String and dynamic). To receive the map we call the generated function _$PersonModelToJson(this), and pass the current instance inside.\nUnleash the power of the built_runner After we have successfully created our model with the necessary annotations and functions, we are ready to go for the built_runner script. We open our project in the terminal and execute one of the following commands.\n// Inside of Flutter projects // Generates the generate files once flutter pub run build_runner build // Watches the model files and generates on each change flutter pub run build_runner watch // Inside of Dart projects // Generates the generate files once pub run build_runner build // Watches the model files and generates on each change pub run build_runner watch For the case that you have a regular dart project, I also added the commands for the consistent Dart packages creation. This command will create for you the additional *.g.dart files. These files can be inserted into .gitignore, as everyone in the team can execute this command.\nLet us have a more in-depth look into the generated file from the serialisation. Here you can see the two functions that we call in the fromJson and toJson of the partial class.\n// GENERATED CODE - DO NOT MODIFY BY HAND part of 'person_model.dart'; // ************************************************************************** // JsonSerializableGenerator // ************************************************************************** PersonModel _$PersonModelFromJson(Map\u003cString, dynamic\u003e json) { return PersonModel( name: json['name'] == null ? null : NameModel.fromJson(json['name'] as Map\u003cString, dynamic\u003e), phone: json['phone'] as String, email: json['email'] as String, picture: json['picture'] == null ? null : PictureModel.fromJson(json['picture'] as Map\u003cString, dynamic\u003e), ); } Map\u003cString, dynamic\u003e _$PersonModelToJson(PersonModel instance) =\u003e \u003cString, dynamic\u003e{ 'name': instance.name, 'phone': instance.phone, 'email': instance.email, 'picture': instance.picture, }; Here are all the strings that we had to create beforehand inside of these methods. Thanks to built_runner they getting now generated for us. If you take a look at line 18, you can see that even the child models are generated correctly. If we now change something in our class and execute once more the build runner (or let it watch), then we will see how it gets added to the list automatically.\nBenefits Modifications to the class are instantaneously reflected\nLower maintenance due to less written code\nTypes are directly set via the attributes\nNo magic happens, the generated files are in the project\nDisadvantages Initial setup is increased\nThere is some boilerplate involved\nYou have to make sure everyone on the team is aware of the build_runner function (possible solution would be a script or a good readme.md file)\nGenerated files could distract from the real model files\nPackages for Flutter JSON Serialization There are several other packages that you can use for generated JSON Serialization.\nbuilt_value / built_collection The built_value or built_collection can handle JSON Serialization in a very similar way as we did in json_serializable. But add beneficial functions like immutability, comparability and other quality of life functions.\ndart_json The dart_json has the benefit that it is absolutely dependency less. If you search for a solution with as few dependencies as possible this package is your best bet.\nJSON Web parser There is some JSON Web parser that creates out of your JSON a valid dart model for you. You can copy a JSON into the left side and copy the model on the right side into your application.\nConclusion JSON Serialization is a crucial topic, primarily if you work with a lot of external requests and different API´s that are changing their contracts from time to time. These should lead to more productivity so that we can implement significant features easier.\nI made a poll on twitter to see which framework is the most used at the moment, but it seems it is pretty close together. My recommendation is to take a look at each package/solution and then use which one fits your needs best.\nThank you for reading and stay curious.\n","wordCount":"1424","inLanguage":"en","image":"https://flutter-explained.dev/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2020-04-05T00:00:00Z","dateModified":"2020-04-05T00:00:00Z","author":{"@type":"Person","name":"Max Weber"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://flutter-explained.dev/posts/step-by-step-guide-for-flutter-json-serialization/"},"publisher":{"@type":"Organization","name":"Max Weber - Developer, Publisher and Father","logo":{"@type":"ImageObject","url":"https://flutter-explained.dev/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://flutter-explained.dev/ accesskey=h title="Home (Alt + H)"><img src=https://flutter-explained.dev/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://flutter-explained.dev/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://flutter-explained.dev/>Home</a>&nbsp;»&nbsp;<a href=https://flutter-explained.dev/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Step-by-Step guide for Flutter JSON Serialization</h1><div class=post-description>In this article I want to tell you about my personal development story</div><div class=post-meta><span title='2020-04-05 00:00:00 +0000 UTC'>April 5, 2020</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;1424 words&nbsp;·&nbsp;Max Weber&nbsp;|&nbsp;<a href=https://github.com/md-weber/website/tree/main/content/posts/step-by-step-guide-for-flutter-json-serialization.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#general-serialization>General Serialization</a></li><li><a href=#basic-network-request--example-app>Basic Network Request – Example App</a></li><li><a href=#manual-flutter-json-serialization>Manual Flutter JSON Serialization</a><ul><li><a href=#benefits>Benefits</a></li><li><a href=#disadvantages>Disadvantages</a></li></ul></li><li><a href=#generated-serialization>Generated Serialization</a></li><li><a href=#dependencies>Dependencies</a></li><li><a href=#modify-the-model>Modify the model</a></li><li><a href=#unleash-the-power-of-the-built_runner>Unleash the power of the built_runner</a><ul><li><a href=#benefits-1>Benefits</a></li><li><a href=#disadvantages-1>Disadvantages</a></li></ul></li><li><a href=#packages-for-flutter-json-serialization>Packages for Flutter JSON Serialization</a><ul><li><a href=#built_value--built_collection>built_value / built_collection</a></li><li><a href=#dart_json>dart_json</a></li><li><a href=#json-web-parser>JSON Web parser</a></li></ul></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></details></div><div class=post-content><h2 id=general-serialization>General Serialization<a hidden class=anchor aria-hidden=true href=#general-serialization>#</a></h2><p>Serialization is the process in computer science to convert an object into
something that can be saved in a database or be sent via a network request.
Today we want to transform a JSON String that we receive from an API and
transform it into an instance of an object.</p><p><img alt="JSON to\ninstance" loading=lazy src=//images.ctfassets.net/573xlmlwok2s/2p9fcF4vve0tZxeapdoo4Y/ff9f5d2374bc5be78c16976d1ea64620/json_to_instance.webp></p><p><img alt="JSON string to\nperson" loading=lazy src=//images.ctfassets.net/573xlmlwok2s/6Gmfe859w9cYMUIfMwkaED/3832f942d09c97a5a5e138ce699cfe09/string-to-person.webp></p><p>To get our Person information as a String, I will work in the following
example with the Random User Generator. This can generate random user
information and provides us with an API to receive a JSON String.</p><h2 id=basic-network-request--example-app>Basic Network Request – Example App<a hidden class=anchor aria-hidden=true href=#basic-network-request--example-app>#</a></h2><p>With the help of the <a href=https://randomuser.me/>RandomUserAPI</a>, I created an
application that shows us a list of users as soon as we open the app. We
create this Application together in the video for a <a href="https://www.youtube.com/watch?v=hz2LQ43muio">basic network
request</a>. In the video, we use
the manual approach for Flutter JSON Serialization, and with this blog post,
we changed that to a more automated process.</p><p>If you search the source code for this project and this article please you
will find everything
<a href=https://github.com/md-weber/network_request_tutorial>here</a>.</p><p><img alt="Example app for network requests with a user\napi" loading=lazy src=//images.ctfassets.net/573xlmlwok2s/6IVKinzOZkv5rVqJDfuB6E/07faa4ec40dac6b10a2d81da9120f34a/network_app_example.gif></p><h2 id=manual-flutter-json-serialization>Manual Flutter JSON Serialization<a hidden class=anchor aria-hidden=true href=#manual-flutter-json-serialization>#</a></h2><p>To get a better understanding of why we should prefer automatic Flutter JSON
Serialization, we have to take a step backwards. For that, we first take a
look at how the manual serialization works precisely.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Person</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kt>String</span> <span class=n>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kt>String</span> <span class=n>phoneNumber</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kt>String</span> <span class=n>imageUrl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>Person</span><span class=p>({</span><span class=k>this</span><span class=p>.</span><span class=n>name</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=n>phoneNumber</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=n>imageUrl</span><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>Person</span><span class=p>.</span><span class=n>fromJson</span><span class=p>(</span><span class=n>Map</span><span class=o>&lt;</span><span class=kt>String</span><span class=p>,</span> <span class=kt>dynamic</span><span class=o>&gt;</span> <span class=n>json</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=o>:</span> <span class=n>name</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;</span><span class=si>${</span><span class=n>json</span><span class=p>[</span><span class=s2>&#34;name&#34;</span><span class=p>][</span><span class=s2>&#34;title&#34;</span><span class=p>]</span><span class=si>}</span><span class=s1> &#39;</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;</span><span class=si>${</span><span class=n>json</span><span class=p>[</span><span class=s2>&#34;name&#34;</span><span class=p>][</span><span class=s2>&#34;first&#34;</span><span class=p>]</span><span class=si>}</span><span class=s1> &#39;</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;</span><span class=si>${</span><span class=n>json</span><span class=p>[</span><span class=s2>&#34;name&#34;</span><span class=p>][</span><span class=s2>&#34;last&#34;</span><span class=p>]</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>phoneNumber</span> <span class=o>=</span> <span class=n>json</span><span class=p>[</span><span class=s2>&#34;phone&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>        <span class=n>imageUrl</span> <span class=o>=</span> <span class=n>json</span><span class=p>[</span><span class=s2>&#34;picture&#34;</span><span class=p>][</span><span class=s2>&#34;thumbnail&#34;</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>In the code snippet above, we created a new person object that we receive from
our API. As you probably already have seen, we have to write all the key
strings into the class and pollute our class with API information.
Additionally, we come into the trap that if we want to add or remove an
attribute, we have to change it all over.</p><p>That makes the maintainability pretty hard. Especially if the API changes and
we have to create it from scratch. That would lead to a lot of searches and
replacements, and we will lose all IDE supports.</p><h3 id=benefits>Benefits<a hidden class=anchor aria-hidden=true href=#benefits>#</a></h3><ul><li><p>No boilerplate surrounding the solution</p></li><li><p>There is no setup required, so you can start directly accessing the
parameters</p></li></ul><h3 id=disadvantages>Disadvantages<a hidden class=anchor aria-hidden=true href=#disadvantages>#</a></h3><ul><li><p>You have to write every line yourself</p></li><li><p>Typos can happen and reduce the stability of your application</p></li><li><p>For every new Field that you want to add, delete or modify we have to modify
the code in the model</p></li><li><p>Higher maintenance costs especially for larger projects or with changing
API´s</p></li></ul><h2 id=generated-serialization>Generated Serialization<a hidden class=anchor aria-hidden=true href=#generated-serialization>#</a></h2><p>Now that we understand the issues with self-written serialisation let’s have a
look at generated Flutter JSON Serialization. There is at the moment not a
built-in solution in the Flutter framework, but there are plenty of perfect
packages on <a href=https://pub.dev/>pub.dev</a> for this problem. In this article, we
will have a closer look at the
<a href=https://pub.dev/packages/json_serializable>json_serializable</a> package.</p><p>The package works powerfully with the build_runner package and allows us to
generate the “fromJSON” and “toJSON” functions, without writing all keys of
the JSON. We only have to set up our models correctly, annotate them
accurately and provide two functions inside. But enough of the words, we want
to see some code.</p><h2 id=dependencies>Dependencies<a hidden class=anchor aria-hidden=true href=#dependencies>#</a></h2><p>Before we can begin to work with the json_serializable package, we have to add
first some dependencies into our project.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>dependencies</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>flutter</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>sdk</span><span class=p>:</span><span class=w> </span><span class=l>flutter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>cupertino_icons</span><span class=p>:</span><span class=w> </span><span class=l>^0.1.3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>http</span><span class=p>:</span><span class=w> </span><span class=l>^0.12.0+4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>json_annotation</span><span class=p>:</span><span class=w> </span><span class=l>^3.0.1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>dev_dependencies</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>flutter_test</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>sdk</span><span class=p>:</span><span class=w> </span><span class=l>flutter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>build_runner</span><span class=p>:</span><span class=w> </span><span class=l>^1.8.1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>json_serializable</span><span class=p>:</span><span class=w> </span><span class=l>^3.3.0</span><span class=w>
</span></span></span></code></pre></div><p>The json_annotation is the only dependency that actually has to be inside of
our project. The build_runner and json_serializable are just development
dependencies and will not be part of the final bundle.</p><h2 id=modify-the-model>Modify the model<a hidden class=anchor aria-hidden=true href=#modify-the-model>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>part</span> <span class=s1>&#39;person_model.g.dart&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>@</span><span class=n>JsonSerializable</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>PersonModel</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>NameModel</span> <span class=n>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kt>String</span> <span class=n>phone</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kt>String</span> <span class=n>email</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=n>PictureModel</span> <span class=n>picture</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>PersonModel</span><span class=p>({</span><span class=k>this</span><span class=p>.</span><span class=n>name</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=n>phone</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=n>email</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=n>picture</span><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>factory</span> <span class=n>PersonModel</span><span class=p>.</span><span class=n>fromJson</span><span class=p>(</span><span class=n>Map</span><span class=o>&lt;</span><span class=kt>String</span><span class=p>,</span> <span class=kt>dynamic</span><span class=o>&gt;</span> <span class=n>json</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=n>_$PersonModelFromJson</span><span class=p>(</span><span class=n>json</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>Map</span><span class=o>&lt;</span><span class=kt>String</span><span class=p>,</span> <span class=kt>dynamic</span><span class=o>&gt;</span> <span class=n>toJson</span><span class=p>()</span> <span class=o>=&gt;</span> <span class=n>_$PersonModelToJson</span><span class=p>(</span><span class=k>this</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Line 1: With the part <code>person_model.g.dart</code> we give the PersonModel class the
possibility to access the methods inside the person_model.g.dart file. The
file will be generated later from the built_runner.</p><p>Line 3: The <code>@JsonSerializable()</code> annotation tells the build_runner that this
class has to be concerned for the generation of a new file and creation of a
serialization.</p><p>Line 5 + 8: For objects inside our JSON we have to create their representing
Model classes for NameModel and PictureModel. The new models will also be
annotated with @JsonSerializable() and will also get the two new methods from
line 12 and 14.</p><p>Line 12: The new
<a href=https://dart.dev/guides/language/language-tour#factory-constructors>factory</a>
constructor fromJson is close to our old method. But instead of creating a new
Instance of the PersonModel, we call a method _$PersonModelFromJson(json).
This method will be generated later with the help of built_runner.</p><p>Line 14: The toJson method returns as expected a Json (in Dart a Map between
String and dynamic). To receive the map we call the generated function
<code>_$PersonModelToJson(this)</code>, and pass the current instance inside.</p><h2 id=unleash-the-power-of-the-built_runner>Unleash the power of the built_runner<a hidden class=anchor aria-hidden=true href=#unleash-the-power-of-the-built_runner>#</a></h2><p>After we have successfully created our model with the necessary annotations
and functions, we are ready to go for the built_runner script. We open our
project in the terminal and execute one of the following commands.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// Inside of Flutter projects
</span></span><span class=line><span class=cl>// Generates the generate files once
</span></span><span class=line><span class=cl>flutter pub run build_runner build
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// Watches the model files and generates on each change
</span></span><span class=line><span class=cl>flutter pub run build_runner watch
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// Inside of Dart projects
</span></span><span class=line><span class=cl>// Generates the generate files once
</span></span><span class=line><span class=cl>pub run build_runner build
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// Watches the model files and generates on each change
</span></span><span class=line><span class=cl>pub run build_runner watch
</span></span></code></pre></div><p>For the case that you have a regular dart project, I also added the commands
for the consistent Dart packages creation. This command will create for you
the additional *.g.dart files. These files can be inserted into .gitignore, as
everyone in the team can execute this command.</p><p><img alt="Generated files of the Flutter JSON\nSerialization" loading=lazy src=//images.ctfassets.net/573xlmlwok2s/5PHa3a7XYEcio2BifAHGJD/2a006271e67462ed69ed60c975b94762/generated_files.webp></p><p>Let us have a more in-depth look into the generated file from the
serialisation. Here you can see the two functions that we call in the fromJson
and toJson of the partial class.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// GENERATED CODE - DO NOT MODIFY BY HAND
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>part of</span> <span class=s1>&#39;person_model.dart&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// **************************************************************************
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// JsonSerializableGenerator
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// **************************************************************************
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>PersonModel</span> <span class=n>_$PersonModelFromJson</span><span class=p>(</span><span class=n>Map</span><span class=o>&lt;</span><span class=kt>String</span><span class=p>,</span> <span class=kt>dynamic</span><span class=o>&gt;</span> <span class=n>json</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=n>PersonModel</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=nl>name:</span> <span class=n>json</span><span class=p>[</span><span class=s1>&#39;name&#39;</span><span class=p>]</span> <span class=o>==</span> <span class=kc>null</span>
</span></span><span class=line><span class=cl>        <span class=o>?</span> <span class=kc>null</span>
</span></span><span class=line><span class=cl>        <span class=o>:</span> <span class=n>NameModel</span><span class=p>.</span><span class=n>fromJson</span><span class=p>(</span><span class=n>json</span><span class=p>[</span><span class=s1>&#39;name&#39;</span><span class=p>]</span> <span class=o>as</span> <span class=n>Map</span><span class=o>&lt;</span><span class=kt>String</span><span class=p>,</span> <span class=kt>dynamic</span><span class=o>&gt;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=nl>phone:</span> <span class=n>json</span><span class=p>[</span><span class=s1>&#39;phone&#39;</span><span class=p>]</span> <span class=o>as</span> <span class=kt>String</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nl>email:</span> <span class=n>json</span><span class=p>[</span><span class=s1>&#39;email&#39;</span><span class=p>]</span> <span class=o>as</span> <span class=kt>String</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nl>picture:</span> <span class=n>json</span><span class=p>[</span><span class=s1>&#39;picture&#39;</span><span class=p>]</span> <span class=o>==</span> <span class=kc>null</span>
</span></span><span class=line><span class=cl>        <span class=o>?</span> <span class=kc>null</span>
</span></span><span class=line><span class=cl>        <span class=o>:</span> <span class=n>PictureModel</span><span class=p>.</span><span class=n>fromJson</span><span class=p>(</span><span class=n>json</span><span class=p>[</span><span class=s1>&#39;picture&#39;</span><span class=p>]</span> <span class=o>as</span> <span class=n>Map</span><span class=o>&lt;</span><span class=kt>String</span><span class=p>,</span> <span class=kt>dynamic</span><span class=o>&gt;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Map</span><span class=o>&lt;</span><span class=kt>String</span><span class=p>,</span> <span class=kt>dynamic</span><span class=o>&gt;</span> <span class=n>_$PersonModelToJson</span><span class=p>(</span><span class=n>PersonModel</span> <span class=n>instance</span><span class=p>)</span> <span class=o>=&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=kt>String</span><span class=p>,</span> <span class=kt>dynamic</span><span class=o>&gt;</span><span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=s1>&#39;name&#39;</span><span class=o>:</span> <span class=n>instance</span><span class=p>.</span><span class=n>name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s1>&#39;phone&#39;</span><span class=o>:</span> <span class=n>instance</span><span class=p>.</span><span class=n>phone</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s1>&#39;email&#39;</span><span class=o>:</span> <span class=n>instance</span><span class=p>.</span><span class=n>email</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s1>&#39;picture&#39;</span><span class=o>:</span> <span class=n>instance</span><span class=p>.</span><span class=n>picture</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span></code></pre></div><p>Here are all the strings that we had to create beforehand inside of these
methods. Thanks to built_runner they getting now generated for us. If you take
a look at line 18, you can see that even the child models are generated
correctly. If we now change something in our class and execute once more the
build runner (or let it watch), then we will see how it gets added to the list
automatically.</p><h3 id=benefits-1>Benefits<a hidden class=anchor aria-hidden=true href=#benefits-1>#</a></h3><ul><li><p>Modifications to the class are instantaneously reflected</p></li><li><p>Lower maintenance due to less written code</p></li><li><p>Types are directly set via the attributes</p></li><li><p>No magic happens, the generated files are in the project</p></li></ul><h3 id=disadvantages-1>Disadvantages<a hidden class=anchor aria-hidden=true href=#disadvantages-1>#</a></h3><ul><li><p>Initial setup is increased</p></li><li><p>There is some boilerplate involved</p></li><li><p>You have to make sure everyone on the team is aware of the build_runner
function (possible solution would be a script or a good readme.md file)</p></li><li><p>Generated files could distract from the real model files</p></li></ul><h2 id=packages-for-flutter-json-serialization>Packages for Flutter JSON Serialization<a hidden class=anchor aria-hidden=true href=#packages-for-flutter-json-serialization>#</a></h2><p>There are several other packages that you can use for generated JSON
Serialization.</p><h3 id=built_value--built_collection>built_value / built_collection<a hidden class=anchor aria-hidden=true href=#built_value--built_collection>#</a></h3><p>The <a href=https://pub.dev/packages/built_value>built_value</a> or
<a href=https://pub.dev/packages/built_collection>built_collection</a> can handle JSON
Serialization in a very similar way as we did in json_serializable. But add
beneficial functions like immutability, comparability and other quality of
life functions.</p><h3 id=dart_json>dart_json<a hidden class=anchor aria-hidden=true href=#dart_json>#</a></h3><p>The <a href=https://pub.dev/packages/dart_json>dart_json</a> has the benefit that it is
absolutely dependency less. If you search for a solution with as few
dependencies as possible this package is your best bet.</p><h3 id=json-web-parser>JSON Web parser<a hidden class=anchor aria-hidden=true href=#json-web-parser>#</a></h3><p>There is some <a href="https://app.quicktype.io/?share=Dxzba5UONSYqWKLpCbog">JSON Web
parser</a> that creates out
of your JSON a valid dart model for you. You can copy a JSON into the left
side and copy the model on the right side into your application.</p><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h2><p>JSON Serialization is a crucial topic, primarily if you work with a lot of
external requests and different API´s that are changing their contracts from
time to time. These should lead to more productivity so that we can implement
significant features easier.</p><p>I made a poll on twitter to see which framework is the most used at the
moment, but it seems it is pretty close together. My recommendation is to take
a look at each package/solution and then use which one fits your needs best.</p><p>Thank you for reading and stay curious.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://flutter-explained.dev/tags/flutter/>Flutter</a></li><li><a href=https://flutter-explained.dev/tags/json/>JSON</a></li><li><a href=https://flutter-explained.dev/tags/serialization/>Serialization</a></li></ul><nav class=paginav><a class=prev href=https://flutter-explained.dev/posts/firebase-hosting-for-flutter-web-projects-in-4-easy-steps/><span class=title>« Prev</span><br><span>Firebase Hosting for Flutter Web Projects in 4 easy steps</span>
</a><a class=next href=https://flutter-explained.dev/posts/flutter-navigation-everything-you-need-to-know/><span class=title>Next »</span><br><span>Flutter Navigation – Everything you need to know</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://flutter-explained.dev/>Max Weber - Developer, Publisher and Father</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><style>.custom-footer{display:flex;margin:0 auto;font-size:11px;justify-content:center}.custom-footer a{padding:10px}</style><nav class=custom-footer><a href=/data-privacy>Data Privacy</a>
<a href=/imprint>Imprint</a>
<a href=#manage-consent>Manage Consent</a></nav><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>